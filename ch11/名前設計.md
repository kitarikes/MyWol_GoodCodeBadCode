# 名前設計 - あるべき構造を見破る名前 -

## 【重要】目的駆動名前設計!!

- 名前から目的や意図が読み取れることを重視
- 単一責任を守る設計


## 悪魔を呼び寄せる名前（関心を分離しよう）

- 商品クラスとして作るのは意味が広すぎないか？

↓

- 予約品
- 注文品
- 在庫品
- 発送品

のように目的別にクラスを分割する（関心の分離）

商品だけだと、目的がわからない！

## 目的駆動名前設計の注意点

- 可能な限り具体的で、意味が狭い、目的に特快した名前を選ぶ
- 存在駆動ではなく、目的駆動で名前を考える（解像度が高い名前に）
  - 存在駆動 → ユーザーは、法人なのか、個人なのか、目的が違う
- どんな業務目的があるのか分析する
- 声に出して話してみる
- 利用規約を読んでみる
  - 利用規約には意図が明確な言葉があるのでヒントに
- 違う名前に置き換えられないか検討する
  - 顧客 → 宿泊する人 + 支払う人 に分けて設計するなど
- 関心が分離されているか点検する

## 既存クラスの構造改善を促す問い

- このクラスの正体は何ですか？実は全然別の概念である可能性がないか？
- このクラスの目的は何ですか？また、何をもって目的を達成したとみなすのか教えてください。

## 技術駆動命名はやめよう

- memory, cache, thread, ...
- function, method, class, ...
- int, str, flag, ...

ハードウェアに近いレイヤーでは技術駆動命名になることもある！

## ロジックをなぞった名前をつけない

- 以下は、内部のロジックをなぞった命名になっている！
- 実は、魔法を唱えられるかチェックしたいだけ！

```java
class Magic {
    boolean isMemeberHpMoreThanZeroAndIdMemberCanActAndIsMemberMpMoreThanMagicCostMp(member) {
        // ~~~
    }
}

// ↓

class Magic {
    boolean canChant(final Member member) {
        // ~~~
    }
}
```

## ~~Managerという名前を命名しない！

```java
class MemberManager {
    int getHitPoint() {
        // ~~~
    }

    void exportCsv() {
        // ~~~
    }

    // 巨大化していく
    // 関心の分離をしにくい名前
}
```

## 文脈によって意味や扱いが異なる名前

- Carクラス
    - 配送元
    - 配送先
    - 配送経路
    - 販売価格
    - 販売オプション 

↓ 文脈ごとに設計し直す

- 配送パッケージ
    - Carクラス
        - 配送元
        - 配送先  
        - 配送経路
    - 配送先選択
- 販売パッケージ
    - Carクラス
        - 販売価格
        - 販売オプション
    - 注文

このように文脈によって最上段の目的を分割することができる

## 動詞＋目的後のメソッド名をつけない

- アンチパターン：`addItemToParty`をEnemyクラスに実装する

```
〜〜を〇〇にする というメソッドは、
自身の関心外のロジックを混入させるきっかけとなる
```

- メソッド命名は動詞1語にするべき
    - PartyItemsクラスを作って、`add`メソッドを実装する

## メソッド命名は、クラス名 ＋ 動詞 にしてみて違和感がないか？

- `isHungry`メソッドの場合
- ❌ Commonクラス is hungry
- ◎ Memberクラス is hungry

## エディタで補完できるから、変数名は省略しない！

