# 設計パターン

- 完全コンストラクタ
    - 不正状態から防護する
- 値オブジェクト
    - 値に関するロジックをカプセル化
- ストラテジ
    - 条件分岐を削減し、ロジックを単純化
- ポリシー
    - 条件分岐を単純化したり、カスタマイズしたりできるように
- ファーストクラスコレクション
    - コレクションに関するロジックをカプセル化する
- スプラウトクラス
    - 既存ロジックを変更せずに安全に新機能を追加する

## 完全コンストラクタ（前述のHP計算、Moneyの例）

不正状態から防護する設計パターン。

1. インスタンス変数を全て初期化できる引数を持ったコンストラクタを用意する。
2. コンストラクタ内のガード節で防護する。
3. よって、生成時に正常値だけを持つ完全なインスタンスが生成される。
4. さらに、finalで不変にし、生成後に不正状態にならないようにする。

## 値オブジェクト（前述のMoneyの例）

値に関連するロジックを一箇所に集めカプセル化する。

- 課題感: 例えば、金額をローカル変数や引数で管理してると、計算ロジックがバラバラに書かれてしまう。
- また、同じint型の値が金額用の変数に不注意に代入されてしまう可能性もある。

1. コンストラクタに値の概念（0円以上）を定義する。
2. ロジックはクラス内に集約する。
3. メソッドの引数は「値クラス」のみを取るようにする。


値オブジェクトとして設計可能な例

- ECサイト：税別金額、税込金額、商品名、注文数、電話番号、配送元、配送先、割引ポイント・・
- タスク管理：タスクタイトル、タスク説明、コメント、開始日、期日、優先度、進捗状態、担当者ID、担当者名・・

# 「完全コンストラクタ＋値オブジェクト」はカプセル化の最も基本的な設計パターン